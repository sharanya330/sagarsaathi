{"ast":null,"code":"var _jsxFileName = \"/Users/sharanya/Desktop/sagarsaathi/frontend/src/pages/MyTrips.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport api from '../utils/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function MyTrips() {\n  _s();\n  const [trips, setTrips] = useState([]);\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    (async () => {\n      try {\n        const {\n          data\n        } = await api.get('/api/trips/my');\n        setTrips((data === null || data === void 0 ? void 0 : data.trips) || []);\n      } catch (e) {\n        var _e$response, _e$response$data;\n        setError((e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.message) || 'Failed to load trips');\n      } finally {\n        setLoading(false);\n      }\n    })();\n  }, []);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 20\n    },\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 22,\n    columnNumber: 23\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 20,\n      color: '#dc3545'\n    },\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 23,\n    columnNumber: 21\n  }, this);\n  const cancelTrip = async id => {\n    try {\n      await api.put(`/api/trips/${id}/cancel`, {\n        reason: 'User cancelled from app'\n      });\n      setTrips(prev => prev.map(t => t._id === id ? {\n        ...t,\n        status: 'CANCELLED'\n      } : t));\n    } catch (e) {\n      var _e$response2, _e$response2$data;\n      setError((e === null || e === void 0 ? void 0 : (_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : _e$response2$data.message) || 'Failed to cancel trip');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 800,\n      margin: '20px auto',\n      padding: 20\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"My Trips\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this), trips.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No trips yet.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 29\n    }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: trips.map(t => {\n        var _t$pickUpLocation, _t$dropOffLocation;\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          style: {\n            marginBottom: 10,\n            display: 'flex',\n            gap: 8,\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: t.status\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 41,\n              columnNumber: 21\n            }, this), \" \\u2014 \", (_t$pickUpLocation = t.pickUpLocation) === null || _t$pickUpLocation === void 0 ? void 0 : _t$pickUpLocation.name, \" \\u2192 \", (_t$dropOffLocation = t.dropOffLocation) === null || _t$dropOffLocation === void 0 ? void 0 : _t$dropOffLocation.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 41,\n            columnNumber: 15\n          }, this), t.status === 'REQUESTED' && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => cancelTrip(t._id),\n            style: {\n              marginLeft: 8\n            },\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 17\n          }, this)]\n        }, t._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 35,\n    columnNumber: 5\n  }, this);\n}\n_s(MyTrips, \"GaEwwzdfqF8YV94oj3+wEVb9l40=\");\n_c = MyTrips;\nvar _c;\n$RefreshReg$(_c, \"MyTrips\");","map":{"version":3,"names":["React","useEffect","useState","api","jsxDEV","_jsxDEV","MyTrips","_s","trips","setTrips","error","setError","loading","setLoading","data","get","e","_e$response","_e$response$data","response","message","style","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","color","cancelTrip","id","put","reason","prev","map","t","_id","status","_e$response2","_e$response2$data","maxWidth","margin","length","_t$pickUpLocation","_t$dropOffLocation","marginBottom","display","gap","alignItems","pickUpLocation","name","dropOffLocation","onClick","marginLeft","_c","$RefreshReg$"],"sources":["/Users/sharanya/Desktop/sagarsaathi/frontend/src/pages/MyTrips.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport api from '../utils/api';\n\nexport default function MyTrips(){\n  const [trips, setTrips] = useState([]);\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(true);\n\n  useEffect(()=>{\n    (async()=>{\n      try{\n        const { data } = await api.get('/api/trips/my');\n        setTrips(data?.trips || []);\n      }catch(e){\n        setError(e?.response?.data?.message || 'Failed to load trips');\n      }finally{\n        setLoading(false);\n      }\n    })();\n  },[]);\n\n  if (loading) return <div style={{padding:20}}>Loading...</div>;\n  if (error) return <div style={{padding:20, color:'#dc3545'}}>{error}</div>;\n\n  const cancelTrip = async (id) => {\n    try {\n      await api.put(`/api/trips/${id}/cancel`, { reason: 'User cancelled from app' });\n      setTrips((prev) => prev.map(t => t._id === id ? { ...t, status: 'CANCELLED' } : t));\n    } catch (e) {\n      setError(e?.response?.data?.message || 'Failed to cancel trip');\n    }\n  };\n\n  return (\n    <div style={{maxWidth:800, margin:'20px auto', padding:20}}>\n      <h2>My Trips</h2>\n      {trips.length === 0 ? <p>No trips yet.</p> : (\n        <ul>\n          {trips.map(t => (\n            <li key={t._id} style={{marginBottom:10, display:'flex', gap:8, alignItems:'center'}}>\n              <span><strong>{t.status}</strong> — {t.pickUpLocation?.name} → {t.dropOffLocation?.name}</span>\n              {t.status === 'REQUESTED' && (\n                <button onClick={() => cancelTrip(t._id)} style={{marginLeft:8}}>Cancel</button>\n              )}\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}