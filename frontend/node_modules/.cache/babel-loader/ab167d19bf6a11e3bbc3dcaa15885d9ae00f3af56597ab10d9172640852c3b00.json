{"ast":null,"code":"var _jsxFileName = \"/Users/sharanya/Desktop/sagarsaathi/frontend/src/pages/DriverTrips.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport api from '../utils/api';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function DriverTrips() {\n  _s();\n  const [trips, setTrips] = useState([]);\n  const [error, setError] = useState('');\n  const [acceptId, setAcceptId] = useState('');\n  const load = async () => {\n    try {\n      const {\n        data\n      } = await api.get('/api/trips/assigned');\n      setTrips((data === null || data === void 0 ? void 0 : data.trips) || []);\n    } catch (e) {\n      var _e$response, _e$response$data;\n      setError((e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.message) || 'Failed to load assigned trips');\n    }\n  };\n  useEffect(() => {\n    load();\n  }, []);\n  const post = async (id, action) => {\n    try {\n      await api.patch(`/api/trips/${id}/${action}`);\n      await load();\n    } catch (e) {\n      var _e$response2, _e$response2$data;\n      setError((e === null || e === void 0 ? void 0 : (_e$response2 = e.response) === null || _e$response2 === void 0 ? void 0 : (_e$response2$data = _e$response2.data) === null || _e$response2$data === void 0 ? void 0 : _e$response2$data.message) || `Failed to ${action} trip`);\n    }\n  };\n  const accept = async () => {\n    if (!acceptId) return;\n    await post(acceptId, 'accept');\n    setAcceptId('');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 800,\n      margin: '20px auto',\n      padding: 20\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Assigned Trips\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 12\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Trip ID to accept\",\n        value: acceptId,\n        onChange: e => setAcceptId(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: accept,\n        style: {\n          marginLeft: 8\n        },\n        children: \"Accept Trip\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: '#dc3545'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 17\n    }, this), trips.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No active trips.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 29\n    }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: trips.map(t => {\n        var _t$pickUpLocation, _t$dropOffLocation;\n        return /*#__PURE__*/_jsxDEV(\"li\", {\n          style: {\n            marginBottom: 10\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: t.status\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 47,\n              columnNumber: 20\n            }, this), \" \\u2014 \", (_t$pickUpLocation = t.pickUpLocation) === null || _t$pickUpLocation === void 0 ? void 0 : _t$pickUpLocation.name, \" \\u2192 \", (_t$dropOffLocation = t.dropOffLocation) === null || _t$dropOffLocation === void 0 ? void 0 : _t$dropOffLocation.name]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: 8,\n              marginTop: 6\n            },\n            children: [t.status === 'ACCEPTED' && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => post(t._id, 'start'),\n                children: \"Start\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 51,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => post(t._id, 'driver_cancel'),\n                children: \"Cancel\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 52,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true), t.status === 'ON_TRIP' && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => post(t._id, 'end'),\n              children: \"End\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 15\n          }, this)]\n        }, t._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n}\n_s(DriverTrips, \"rYwUCOrMp3xYaFqSIIi0AoZ1vjU=\");\n_c = DriverTrips;\nvar _c;\n$RefreshReg$(_c, \"DriverTrips\");","map":{"version":3,"names":["React","useEffect","useState","api","jsxDEV","_jsxDEV","Fragment","_Fragment","DriverTrips","_s","trips","setTrips","error","setError","acceptId","setAcceptId","load","data","get","e","_e$response","_e$response$data","response","message","post","id","action","patch","_e$response2","_e$response2$data","accept","style","maxWidth","margin","padding","children","fileName","_jsxFileName","lineNumber","columnNumber","marginBottom","placeholder","value","onChange","target","onClick","marginLeft","color","length","map","t","_t$pickUpLocation","_t$dropOffLocation","status","pickUpLocation","name","dropOffLocation","display","gap","marginTop","_id","_c","$RefreshReg$"],"sources":["/Users/sharanya/Desktop/sagarsaathi/frontend/src/pages/DriverTrips.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport api from '../utils/api';\n\nexport default function DriverTrips(){\n  const [trips, setTrips] = useState([]);\n  const [error, setError] = useState('');\n  const [acceptId, setAcceptId] = useState('');\n\n  const load = async () => {\n    try {\n      const { data } = await api.get('/api/trips/assigned');\n      setTrips(data?.trips || []);\n    } catch (e) {\n      setError(e?.response?.data?.message || 'Failed to load assigned trips');\n    }\n  };\n\n  useEffect(()=>{ load(); },[]);\n\n  const post = async (id, action) => {\n    try {\n      await api.patch(`/api/trips/${id}/${action}`);\n      await load();\n    } catch (e) {\n      setError(e?.response?.data?.message || `Failed to ${action} trip`);\n    }\n  };\n\n  const accept = async () => {\n    if (!acceptId) return;\n    await post(acceptId, 'accept');\n    setAcceptId('');\n  };\n\n  return (\n    <div style={{maxWidth:800, margin:'20px auto', padding:20}}>\n      <h2>Assigned Trips</h2>\n      <div style={{marginBottom:12}}>\n        <input placeholder=\"Trip ID to accept\" value={acceptId} onChange={e=>setAcceptId(e.target.value)} />\n        <button onClick={accept} style={{marginLeft:8}}>Accept Trip</button>\n      </div>\n      {error && <p style={{color:'#dc3545'}}>{error}</p>}\n      {trips.length === 0 ? <p>No active trips.</p> : (\n        <ul>\n          {trips.map(t => (\n            <li key={t._id} style={{marginBottom:10}}>\n              <div><strong>{t.status}</strong> — {t.pickUpLocation?.name} → {t.dropOffLocation?.name}</div>\n              <div style={{display:'flex', gap:8, marginTop:6}}>\n                {t.status === 'ACCEPTED' && (\n                  <>\n                    <button onClick={()=>post(t._id,'start')}>Start</button>\n                    <button onClick={()=>post(t._id,'driver_cancel')}>Cancel</button>\n                  </>\n                )}\n                {t.status === 'ON_TRIP' && (\n                  <button onClick={()=>post(t._id,'end')}>End</button>\n                )}\n              </div>\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}